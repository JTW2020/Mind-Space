{"ast":null,"code":"import _toConsumableArray from\"/Users/wthunder/projects/Mind-Space/server/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/Users/wthunder/projects/Mind-Space/server/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/wthunder/projects/Mind-Space/server/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/wthunder/projects/Mind-Space/server/client/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState,useEffect}from'react';import axios from'axios';import TextBubble from'./textbubbles';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Chatbox(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),message=_useState2[0],setMessage=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),messageList=_useState4[0],setMessageList=_useState4[1];function handleMsgInputChange(e){e.preventDefault();setMessage(e.target.value);}/*\n    This is the handler method that sends \n    the user's message to the backend\n  */function handleSubmitMsg(_x){return _handleSubmitMsg.apply(this,arguments);}function _handleSubmitMsg(){_handleSubmitMsg=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;_context.next=4;return axios.post(\"\".concat(process.env.REACT_APP_HOST,\"/api/msgEliza\"),{userMessage:message});case 4:res=_context.sent;setMessageList([].concat(_toConsumableArray(messageList),[{user:\"You\",message:message},{user:\"Eliza\",message:res.data.message}]));console.log(messageList);_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);console.error(_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[1,9]]);}));return _handleSubmitMsg.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{className:\"chatbox grid grid-cols-1 w-3/6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-2 mt-5 text-black h-60 bg-zinc-100 rounded-md overflow-auto\",children:[/*#__PURE__*/_jsx(\"a\",{className:\"text-sm italic\",children:\"Type something to talk to Eliza.\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{children:messageList.map(function(message){return/*#__PURE__*/_jsx(TextBubble,{sender:message.user,message:message.message},message.id);})})]}),/*#__PURE__*/_jsx(\"form\",{className:\"flex mt-6 items-center justify-center align-middle\",onSubmit:function onSubmit(e){return handleSubmitMsg(e);},children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"\",children:\"You:\"}),/*#__PURE__*/_jsx(\"input\",{className:\"text-black rounded-sm w-full p-2\",onChange:function onChange(e){handleMsgInputChange(e);}})]})}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-purple-500 mt-4 rounded-sm py-1 px-4\",onClick:function onClick(e){handleSubmitMsg(e);},children:\"Send to Eliza\"})]});}export default Chatbox;","map":{"version":3,"sources":["/Users/wthunder/projects/Mind-Space/server/client/src/pages/components/chatbox_components/Chatbox.js"],"names":["React","useState","useEffect","axios","TextBubble","Chatbox","message","setMessage","messageList","setMessageList","handleMsgInputChange","e","preventDefault","target","value","handleSubmitMsg","post","process","env","REACT_APP_HOST","userMessage","res","user","data","console","log","error","map","id"],"mappings":"uiBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAEA,MAAOC,CAAAA,UAAP,KAAuB,eAAvB,C,wFAEA,QAASC,CAAAA,OAAT,EAAmB,CACjB,cAA8BJ,QAAQ,CAAC,EAAD,CAAtC,wCAAOK,OAAP,eAAgBC,UAAhB,eACA,eAAsCN,QAAQ,CAAC,EAAD,CAA9C,yCAAOO,WAAP,eAAoBC,cAApB,eAEA,QAASC,CAAAA,oBAAT,CAA8BC,CAA9B,CAAiC,CAC/BA,CAAC,CAACC,cAAF,GACAL,UAAU,CAACI,CAAC,CAACE,MAAF,CAASC,KAAV,CAAV,CACD,CAED;AACF;AACA;AACA,IAZmB,QAaFC,CAAAA,eAbE,yJAajB,iBAA+BJ,CAA/B,0HACEA,CAAC,CAACC,cAAF,GADF,sCAGsBT,CAAAA,KAAK,CAACa,IAAN,WAAcC,OAAO,CAACC,GAAR,CAAYC,cAA1B,kBAAyD,CACzEC,WAAW,CAAEd,OAD4D,CAAzD,CAHtB,QAGUe,GAHV,eAMIZ,cAAc,8BACTD,WADS,GAEZ,CAAEc,IAAI,CAAE,KAAR,CAAehB,OAAO,CAAEA,OAAxB,CAFY,CAGZ,CAAEgB,IAAI,CAAE,OAAR,CAAiBhB,OAAO,CAAEe,GAAG,CAACE,IAAJ,CAASjB,OAAnC,CAHY,GAAd,CAKAkB,OAAO,CAACC,GAAR,CAAYjB,WAAZ,EAXJ,+EAaIgB,OAAO,CAACE,KAAR,cAbJ,oEAbiB,kDA8BjB,mBACE,aAAK,SAAS,CAAC,gCAAf,wBACE,aAAK,SAAS,CAAC,+DAAf,wBACE,UAAG,SAAS,CAAC,gBAAb,8CADF,cAEE,aAFF,cAGE,qBACGlB,WAAW,CAACmB,GAAZ,CAAgB,SAACrB,OAAD,qBAAa,KAAC,UAAD,EAA6B,MAAM,CAAEA,OAAO,CAACgB,IAA7C,CAAmD,OAAO,CAAEhB,OAAO,CAACA,OAApE,EAAiBA,OAAO,CAACsB,EAAzB,CAAb,EAAhB,CADH,EAHF,GADF,cAQE,aACE,SAAS,CAAC,oDADZ,CAEE,QAAQ,CAAE,kBAAAjB,CAAC,QAAII,CAAAA,eAAe,CAACJ,CAAD,CAAnB,EAFb,uBAGE,aAAK,SAAS,CAAC,QAAf,wBACE,cAAO,SAAS,CAAC,EAAjB,kBADF,cAEE,cACE,SAAS,CAAC,kCADZ,CAEE,QAAQ,CAAE,kBAAAA,CAAC,CAAI,CAAED,oBAAoB,CAACC,CAAD,CAApB,CAAyB,CAF5C,EAFF,GAHF,EARF,cAmBE,eAAQ,SAAS,CAAC,yCAAlB,CAA4D,OAAO,CAAE,iBAAAA,CAAC,CAAI,CAAEI,eAAe,CAACJ,CAAD,CAAf,CAAoB,CAAhG,2BAnBF,GADF,CAyBD,CAED,cAAeN,CAAAA,OAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\n\nimport TextBubble from './textbubbles';\n\nfunction Chatbox() {\n  const [message, setMessage] = useState(\"\");\n  const [messageList, setMessageList] = useState([]);\n\n  function handleMsgInputChange(e) {\n    e.preventDefault();\n    setMessage(e.target.value);\n  }\n\n  /*\n    This is the handler method that sends \n    the user's message to the backend\n  */\n  async function handleSubmitMsg(e) {\n    e.preventDefault();\n    try {\n      const res = await axios.post(`${process.env.REACT_APP_HOST}/api/msgEliza`, {\n        userMessage: message\n      });\n      setMessageList([\n        ...messageList,\n        { user: \"You\", message: message },\n        { user: \"Eliza\", message: res.data.message }\n      ]);\n      console.log(messageList);\n    } catch (err) {\n      console.error(err);\n    }\n  }\n\n  return (\n    <div className=\"chatbox grid grid-cols-1 w-3/6\">\n      <div className=\"p-2 mt-5 text-black h-60 bg-zinc-100 rounded-md overflow-auto\">\n        <a className=\"text-sm italic\">Type something to talk to Eliza.</a>\n        <br />\n        <div>\n          {messageList.map((message) => <TextBubble key={message.id} sender={message.user} message={message.message} />)}\n        </div>\n      </div>\n      <form\n        className=\"flex mt-6 items-center justify-center align-middle\"\n        onSubmit={e => handleSubmitMsg(e)}>\n        <div className=\"w-full\">\n          <label className=\"\">You:</label>\n          <input\n            className=\"text-black rounded-sm w-full p-2\"\n            onChange={e => { handleMsgInputChange(e) }}\n          />\n        </div>\n      </form>\n      <button className=\"bg-purple-500 mt-4 rounded-sm py-1 px-4\" onClick={e => { handleSubmitMsg(e) }}>\n        Send to Eliza\n      </button>\n    </div>\n  )\n}\n\nexport default Chatbox;"]},"metadata":{},"sourceType":"module"}